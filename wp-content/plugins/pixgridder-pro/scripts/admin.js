;function isScrolledIntoCompleteView(e,t){var n=jQuery(window).scrollTop();var r=n+jQuery(window).height();var i=jQuery(e).offset().top;var s=i+jQuery(e).actual("height")+t;return i>=n&&s<=r}function getSelValue(){jQuery("#pix_content_loaded select").each(function(){jQuery(this).bind("change",function(){var e=jQuery("option:selected",this).text();if(!jQuery(this).parents("span").eq(0).find(".appended").length){jQuery(this).parents("span").eq(0).prepend('<span class="appended" />')}var t=jQuery(this).siblings(".appended");jQuery(t).text(e)}).triggerHandler("change")})}function init_sliders(){if(jQuery.isFunction(jQuery.fn.slider)){jQuery(".slider_div").each(function(){var e=jQuery(this);var t=jQuery("input",e).val();if(e.hasClass("milliseconds")){var n=0;var r=5e4;var i=100}else if(e.hasClass("milliseconds_2")){var n=0;var r=5e3;var i=10}else if(e.hasClass("opacity")){var n=0;var r=1;var i=.05}else if(e.hasClass("border")){var n=0;var r=50;var i=1}else if(e.hasClass("em")){var n=0;var r=8;var i=.001}else if(e.hasClass("percent")){var n=0;var r=100;var i=1}else if(e.hasClass("ratio")){var n=0;var r=20;var i=.01}else{var n=1;var r=20;var i=1}jQuery(".slider_cursor",e).slider({range:"min",value:t,min:n,max:r,step:i,slide:function(t,n){jQuery("input",e).val(n.value)}});jQuery("a",e).mousedown(function(t){e.addClass("active")});jQuery(document).mouseup(function(){e.removeClass("active")});jQuery("input",e).keyup(function(){var t=jQuery("input",e).val();jQuery(".slider_cursor",e).slider({range:"min",value:t,min:0,max:r,step:i,slide:function(t,n){jQuery("input",e).val(n.value)}})});jQuery(".slider_cursor",e).each(function(){if(jQuery(".ui-slider-range-min",this).length>1){jQuery(".ui-slider-range-min",this).not(":last").remove()}})})}}function adminNav(){if(pagenow=="toplevel_page_pixgridder_admin"){function e(){var e=jQuery("#spinner2");jQuery("#pix_ap_header h2").append(e.animate({opacity:1},100));var t=localStorage.getItem("pixgridder_active_tab"),n=localStorage.getItem("pixgridder_active_link");if(typeof t=="undefined"||t==false||t==null){t="general"}if(typeof n=="undefined"||n==false||n==null){n="register"}var r=jQuery("#pix_ap_body li[data-store="+n+"] a").attr("href");jQuery.ajax({url:r,success:function(r){var i=jQuery("#pix_content_loaded").outerHeight();jQuery("#pix_content_loaded").outerHeight(i);jQuery("#pix_ap_body").find("li[data-store="+t+"], li[data-store="+n+"]").addClass("current");var s=jQuery("<div/>").append(r.replace(/<script(.|\s)*?\/script>/g,"")).find("#pix_content_loaded").html();jQuery("#pix_content_loaded").animate({opacity:0},0).html('<div class="cf">'+s+"</div>");var o=jQuery("#pix_content_loaded > div").actual("outerHeight");jQuery("#pix_content_loaded").html(s);jQuery("#pix_content_loaded").animate({height:o},800,"easeOutQuad",function(){e.animate({opacity:0},100,function(){jQuery("#spinner_wrap").prepend(e)});jQuery("#pix_content_loaded").css({height:"auto"});jQuery("#pix_content_loaded").animate({opacity:1},250,function(){floatingSaveButton()})});floatingSaveButton();saveOptions();compileCSS();getSelValue();init_sliders();infoDialog();changelogButton();sortElems();pagesCheckboxes();checkLicense();closeAlerts();if(jQuery("#pixgridder_css_code").length){var u=CodeMirror.fromTextArea(document.getElementById("pixgridder_css_code"),{theme:"solarized light"})}},error:function(){}})}e();jQuery("nav#pix_ap_main_nav > ul > li").not(".current").each(function(){var e=jQuery(this);jQuery("> a, > ul",e).hover(function(){if(!e.hasClass("current")){e.addClass("hover");jQuery("nav#pix_ap_main_nav li.current").removeClass("current").addClass("fake-current")}},function(){e.removeClass("hover");jQuery("nav#pix_ap_main_nav li.fake-current").removeClass("fake-current").addClass("current")});jQuery("> a",e).bind("click",function(){return false})});jQuery("nav#pix_ap_main_nav > ul > li li").not(".current").each(function(){var t=jQuery(this);jQuery("> a",t).bind("click",function(){var n=jQuery(this);jQuery("nav#pix_ap_main_nav > ul li").removeClass("current").removeClass("fake-current");t.parents("li").eq(0).addClass("current");t.addClass("current");if(jQuery("nav#pix_ap_main_nav > ul li.hover").length){var r=jQuery("nav#pix_ap_main_nav > ul li.hover").attr("data-store");if(Modernizr.localstorage){localStorage.setItem("pixgridder_active_tab",r)}}var i=t.attr("data-store");if(Modernizr.localstorage){localStorage.setItem("pixgridder_active_link",i)}e();return false})});jQuery("nav#pix_ap_main_nav > ul > li ul").each(function(){var e=jQuery(this).actual("outerHeight"),t=jQuery(this).parents("ul").eq(0).actual("outerHeight");if(e<t){jQuery(this).outerHeight(t)}})}}function floatingSaveButton(){jQuery(window).bind("scroll resize",function(){jQuery("#pix_content_loaded .pix-save-options.fake_button2").each(function(){var e=jQuery(this),t=jQuery(window).width()-(e.offset().left+e.outerWidth()),n=jQuery("#pix_content_loaded"),r=n.offset().left,i=n.outerWidth();jQuery("#pix_content_loaded #gradient-save-button").css({left:r,width:i});if(isScrolledIntoCompleteView(this,20)){jQuery("#pix_content_loaded .pix-save-options").not(".fake_button").not(".fake_button2").removeClass("fixed").css({right:20});jQuery("#pix_content_loaded #gradient-save-button").fadeOut(150)}else{jQuery("#pix_content_loaded .pix-save-options").not(".fake_button").not(".fake_button2").addClass("fixed").css({right:t});jQuery("#pix_content_loaded #gradient-save-button").fadeIn(150)}})}).triggerHandler("scroll")}function saveOptions(){jQuery(document).off("submit","form.ajax_form");jQuery(document).on("submit","form.ajax_form",function(){var e=jQuery("#spinner"),t=jQuery(this),n=t.serialize();if(jQuery(this).find('input[name="compile_css"]').val()!="compile_css"){t.find('button[type="submit"]').not(".push").not(".download").append(e).animate({paddingLeft:40},150,function(){e.animate({opacity:1},100)});jQuery.post(ajaxurl,n).success(function(){console.log(n);e.delay(500).animate({opacity:0},100,function(){jQuery("#spinner_wrap").append(e);jQuery('form.ajax_form button[type="submit"] i').fadeIn(100).delay(500).fadeOut(100,function(){jQuery('button[type="submit"].pix-save-options',t).animate({paddingLeft:15},150)})})}).error(function(){console.log("no")})}else{t.find('button[type="submit"].push').append(e).animate({paddingRight:40},150,function(){e.animate({opacity:1},100)});var r={action:"css_pixgridder_ajax",context:n};jQuery.post(ajaxurl,r).success(function(r){jQuery.post(ajaxurl,n).success(function(n){e.delay(500).animate({opacity:0},100,function(){jQuery("#spinner_wrap").append(e);t.find(".pix_button.compile.push").animate({paddingRight:20},150);t.find('input[name="compile_css"]').val("")})})})}return false})}function compileCSS(){jQuery(document).off("click",'button[type="submit"].download');jQuery(document).on("click",'button[type="submit"].download',function(){var e=jQuery(this),t=e.parents("form").eq(0),n=t.attr("action"),r=e.attr("data-action");if(t.hasClass("ajax_form")){t.removeClass("ajax_form").attr("action",r).attr("method","post").submit();t.addClass("ajax_form").removeAttr("method")}else{t.attr("action",r).submit()}t.attr("action",n);return false});jQuery(document).off("click",'button[type="submit"].push');jQuery(document).on("click",'button[type="submit"].push',function(){var e=jQuery(this),t=e.parents("form").eq(0),n=t.find('input[name="compile_css"]').val("compile_css");jQuery('button[type="submit"].pix-save-options',t).click();n.val("");return false})}function changelogButton(){jQuery(document).off("click",".pix-iframe");jQuery(document).on("click",".pix-iframe",function(){var e=jQuery(this).attr("href"),t=jQuery(this).text(),n=jQuery(window).height(),r=jQuery("<div />");if(e.match(/\.(jpg|png|gif)/i)){var i=jQuery("#spinner2");jQuery("#pix_ap_header h2").append(i.animate({opacity:1},100));jQuery("<img />").load(function(){i.animate({opacity:0},100,function(){jQuery("#spinner_wrap").prepend(i)});r.append(jQuery(this)).dialog({height:jQuery(this).get(0).naturalHeight,width:jQuery(this).get(0).naturalWidth,modal:false,dialogClass:"wp-dialog pix-dialog pix-dialog-info pix-dialog-iframe",position:"center",title:t,zIndex:100,open:function(){jQuery("body").addClass("overflowHidden");jQuery("body").append('<div id="pix-modal-overlay" />')},close:function(){jQuery("#pix-modal-overlay").remove();jQuery("body").removeClass("overflowHidden");r.remove();jQuery(window).unbind("resize")}});r.bind("resize",function(){r.dialog("option","position","center")}).triggerHandler("resize")}).attr("src",e).each(function(){if(this.complete)jQuery(this).load()})}else{r.append(jQuery("<iframe />").attr("src",e)).dialog({height:n*.8,width:"80%",modal:false,dialogClass:"wp-dialog pix-dialog pix-dialog-info pix-dialog-iframe",position:"center",title:t,zIndex:100,open:function(){jQuery("body").addClass("overflowHidden");jQuery("body").append('<div id="pix-modal-overlay" />')},close:function(){jQuery("#pix-modal-overlay").remove();jQuery("body").removeClass("overflowHidden");r.remove();jQuery(window).unbind("resize")}});jQuery(window).bind("resize",function(){n=jQuery(window).height();r.dialog("option",{height:n*.8})});r.bind("resize",function(){r.dialog("option","position","center")}).triggerHandler("resize")}return false})}function infoDialog(){jQuery(document).off("click","[data-dialog]");jQuery(document).on("click","[data-dialog]",function(){var e=jQuery(this).attr("data-dialog"),t=typeof jQuery(this).attr("data-width")!="undefined"?jQuery(this).attr("data-width"):400,n=jQuery(this).text(),r=jQuery("<div />").html(e);r.dialog({height:"auto",width:t,modal:false,dialogClass:"wp-dialog pix-dialog pix-dialog-info",position:"center",title:n,zIndex:100,open:function(){jQuery("body").addClass("overflowHidden");jQuery("body").append('<div id="pix-modal-overlay" />')},close:function(){jQuery("#pix-modal-overlay").remove();jQuery("body").removeClass("overflowHidden");r.remove();jQuery(window).unbind("resize")}});jQuery(window).bind("resize",function(){h=jQuery(window).height(),r.dialog("option",{position:"center"})});return false})}function sortElems(){jQuery(".pix-sorting").each(function(){var e=jQuery(this);jQuery(document).off("click",".add-element");jQuery(document).on("click",".add-element",function(){var t=e.find(".clone").clone();t.find("textarea").trigger("oninput");t.fadeIn().removeClass("hidden").removeClass("clone");t.find("[data-clone]").each(function(){var t=jQuery(this).attr("data-clone");jQuery(this).removeAttr("data-clone");t=t.replace(/\[i\]/g,"["+e.find("> div").not(".clone").length+"]");jQuery(this).attr("name",t).trigger("oninput")});jQuery(this).before(t);getSelValue();infoDialog();sortElems();return false});jQuery(document).off("click",".pix-sorting-elem .delete-element");jQuery(document).on("click",".pix-sorting-elem .delete-element",function(){var t=jQuery(this).parents(".pix-sorting-elem").eq(0);t.animate({opacity:0,height:0,minHeight:0,paddingTop:0,paddingBottom:0,margin:0},400,"easeOutQuad",function(){jQuery(this).remove();e.find("> div").not(".clone").each(function(){var e=jQuery(this).index();jQuery("[name]",this).each(function(){var t=jQuery(this).attr("name");t=t.replace(/_\[(.*?)\]\[/g,"_["+(e-1)+"][");jQuery(this).attr("name",t)})})});return false});jQuery(document).off("click",".edit-element");jQuery(document).on("click",".edit-element",function(){var e=jQuery(this),t=e.parents(".pix-sorting-elem").eq(0),n=jQuery(".dialog-edit-sorting-elements").clone(),r=jQuery(window).height(),i=typeof n.attr("data-width")!="undefined"?n.attr("data-width"):400,s=n.attr("data-title");n.dialog({height:"auto",width:i,modal:false,dialogClass:"wp-dialog pix-dialog pix-dialog-info pix-dialog-input",title:s,zIndex:100,open:function(){getSelValue();jQuery("body").addClass("overflowHidden");jQuery("body").append('<div id="pix-modal-overlay" />');jQuery(this).closest(".ui-dialog").find(".ui-button").last().addClass("ui-dialog-titlebar-edit pix_button");t.find("[data-name]").each(function(){if(jQuery(this).attr("data-name")=="color"&&jQuery(this).val()==""){n.find('[data-name="'+jQuery(this).attr("data-name")+'"]').val("transparent")}else{n.find('[data-name="'+jQuery(this).attr("data-name")+'"] option[value="'+jQuery(this).val()+'"]').prop("selected",true).trigger("change");n.find('[data-name="'+jQuery(this).attr("data-name")+'"]').val(jQuery(this).val()).trigger("keyup");if(jQuery(this).attr("data-name")=="icon"){n.find(".pixgridder-icon-preview i").attr("class",jQuery(this).val())}}})},buttons:{"":function(){jQuery(this).find("[data-name]").each(function(){t.find('[data-name="'+jQuery(this).attr("data-name")+'"]').val(jQuery(this).val()).prop("readOnly",false).trigger("oninput").prop("readOnly",true);t.find('[data-class="'+jQuery(this).attr("data-name")+'"]').attr("class",jQuery(this).val());t.find('[data-color="'+jQuery(this).attr("data-name")+'"]').css("background-color",jQuery(this).val())});jQuery(this).dialog("close")}},close:function(){jQuery("#pix-modal-overlay").remove();n.remove();jQuery("body").removeClass("overflowHidden");jQuery(window).unbind("resize")}});jQuery(window).bind("resize",function(){n.dialog("option",{height:"auto"});r=jQuery(window).height();var e=n.parents(".ui-dialog").eq(0).outerHeight();if(e>r*.8){n.dialog("option",{height:r*.8})}}).triggerHandler("resize");n.bind("resize",function(){n.dialog("option","position","center")}).triggerHandler("resize");return false})})}function pagesCheckboxes(){jQuery(document).off("click",'.for_pages input[type="checkbox"]');jQuery(document).on("click",'.for_pages input[type="checkbox"]',function(){if(jQuery(this).is(":checked")){checked=true}else{checked=false}jQuery(this).parents("blockquote").eq(0).find('blockquote input[type="checkbox"]').prop("checked",checked)})}function checkLicense(){if(typeof pixgridder_check_license!="undefined"&&pixgridder_check_license!=false&&pixgridder_check_license!=null){jQuery("#check_license_message").html(pixgridder_check_message).slideDown()}pixgridder_check_license=undefined}function closeAlerts(){jQuery(document).off("click",".info_close");jQuery(document).on("click",".info_close",function(){jQuery("input[type=hidden]",this).val("close");jQuery(this).parents(".outer_info").eq(0).slideUp(250,"easeOutQuad").animate({opacity:0},{queue:false,duration:250},"easeOutQuad");var e=jQuery(this).parents(".outer_info").eq(0).find("input").serialize();jQuery.post(ajaxurl,e)})}jQuery.noConflict();(function(e){e.fn.extend({actual:function(t,n){if(!this[t]){throw'$.actual => The jQuery method "'+t+'" you called does not exist'}var r={absolute:false,clone:false,includeMargin:false};var i=e.extend(r,n);var s=this.eq(0);var o,u;if(i.clone===true){o=function(){var e="position: absolute !important; top: -1000 !important; ";s=s.clone().attr("style",e).appendTo("body")};u=function(){s.remove()}}else{var a=[];var f="";var l;o=function(){if(e.fn.jquery>="1.8.0")l=s.parents().addBack().filter(":hidden");else l=s.parents().andSelf().filter(":hidden");f+="visibility: hidden !important; display: block !important; ";if(i.absolute===true)f+="position: absolute !important; ";l.each(function(){var t=e(this);a.push(t.attr("style"));t.attr("style",f)})};u=function(){l.each(function(t){var n=e(this);var r=a[t];if(r===undefined){n.removeAttr("style")}else{n.attr("style",r)}})}}o();var c=/(outer)/g.test(t)?s[t](i.includeMargin):s[t]();u();return c}})})(jQuery);(function(e){var t,n={className:"autosizejs",append:"",callback:!1,resizeDelay:10},r="hidden",i="border-box",s="lineHeight",o='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',u=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],a="oninput",f="onpropertychange",l=e(o).data("autosize",!0)[0];l.style.lineHeight="99px","99px"===e(l).css(s)&&u.push(s),l.style.lineHeight="",e.fn.autosize=function(s){return s=e.extend({},n,s||{}),l.parentNode!==document.body&&e(document.body).append(l),this.each(function(){function n(){if(t=m,l.className=s.className,d=parseInt(g.css("maxHeight"),10),e.each(u,function(e,t){l.style[t]=g.css(t)}),a in m){var n=m.style.width;m.style.width="0px",m.offsetWidth,m.style.width=n}}function o(){var e,i,o;t!==m&&n(),l.value=m.value+s.append,l.style.overflowY=m.style.overflowY,o=parseInt(m.style.height,10),l.style.width=Math.max(g.width(),0)+"px",l.scrollTop=0,l.scrollTop=9e4,e=l.scrollTop,d&&e>d?(e=d,i="scroll"):p>e&&(e=p),e+=y,m.style.overflowY=i||r,o!==e&&(m.style.height=e+"px",b&&s.callback.call(m,m))}var p,d,v,m=this,g=e(m),y=0,b=e.isFunction(s.callback);if(!g.data("autosize")){if((g.css("box-sizing")===i||g.css("-moz-box-sizing")===i||g.css("-webkit-box-sizing")===i)&&(y=g.outerHeight()-g.height()),p=Math.max(parseInt(g.css("minHeight"),10)-y||0,g.height()),v="none"===g.css("resize")||"vertical"===g.css("resize")?"none":"horizontal",g.css({overflow:r,overflowY:r,wordWrap:"break-word",resize:v}).data("autosize",!0),f in m?a in m?m[a]=m.onkeyup=o:m[f]=function(){"value"===event.propertyName&&o()}:m[a]=o,s.resizeDelay!==!1){var w,E=e(m).width();e(window).on("resize.autosize",function(){clearTimeout(w),w=setTimeout(function(){e(m).width()!==E&&o()},parseInt(s.resizeDelay,10))})}g.on("autosize",o),o()}})}})(window.jQuery||window.Zepto);(function(e,t,n){function c(){s=t[o](function(){r.each(function(){var t=e(this),n=t.width(),r=t.height(),i=e.data(this,a);if(n!==i.w||r!==i.h){t.trigger(u,[i.w=n,i.h=r])}});c()},i[f])}var r=e([]),i=e.resize=e.extend(e.resize,{}),s,o="setTimeout",u="resize",a=u+"-special-event",f="delay",l="throttleWindow";i[f]=250;i[l]=true;e.event.special[u]={setup:function(){if(!i[l]&&this[o]){return false}var t=e(this);r=r.add(t);e.data(this,a,{w:t.width(),h:t.height()});if(r.length===1){c()}},teardown:function(){if(!i[l]&&this[o]){return false}var t=e(this);r=r.not(t);t.removeData(a);if(!r.length){clearTimeout(s)}},add:function(t){function s(t,i,s){var o=e(this),u=e.data(this,a);u.w=i!==n?i:o.width();u.h=s!==n?s:o.height();r.apply(this,arguments)}if(!i[l]&&this[o]){return false}var r;if(e.isFunction(t)){r=t;return s}else{r=t.handler;t.handler=s}}}})(jQuery,this);jQuery(function(){floatingSaveButton();saveOptions();compileCSS();adminNav();jQuery("textarea").livequery(function(){jQuery(this).autosize()});getSelValue();init_sliders();infoDialog();changelogButton();sortElems();pagesCheckboxes()});